<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio-Roll: Masterpiece</title>
    <style>
        :root { 
            --common: #ecf0f1; --uncommon: #2ecc71; --rare: #3498db; 
            --legendary: #f1c40f; --mythic: #9b59b6; --shiny: #ff69b4; 
            --bg: #050505; --panel: #111;
        }
        body { background: var(--bg); color: #e0e0e0; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        .sidebar-left { width: 300px; background: var(--panel); border-right: 2px solid #222; padding: 15px; overflow-y: auto; }
        .main-game { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; background: radial-gradient(circle, #1a1a1a 0%, #050505 100%); }
        .sidebar-right { width: 280px; background: var(--panel); border-left: 2px solid #222; padding: 15px; overflow-y: auto; }

        /* Enhanced Animal Display */
        .stage { position: relative; width: 300px; height: 300px; display: flex; align-items: center; justify-content: center; border-radius: 50%; transition: 0.5s; }
        #art-display { font-size: 10rem; z-index: 2; filter: drop-shadow(0 0 10px rgba(0,0,0,0.8)); }
        .aura { position: absolute; width: 100%; height: 100%; border-radius: 50%; opacity: 0.2; transition: 0.5s; filter: blur(40px); }

        /* Rarity Visuals */
        .Common .aura { background: white; }
        .Uncommon .aura { background: var(--uncommon); opacity: 0.4; }
        .Rare .aura { background: var(--rare); opacity: 0.5; }
        .Legendary .aura { background: var(--legendary); opacity: 0.6; animation: pulse 2s infinite; }
        .Mythic .aura { background: var(--mythic); opacity: 0.8; animation: glitch-aura 0.3s infinite; }

        @keyframes pulse { 0% { transform: scale(0.8); } 50% { transform: scale(1.2); } 100% { transform: scale(0.8); } }
        @keyframes glitch-aura { 0% { transform: translate(5px); background: #ff0000; } 50% { transform: translate(-5px); background: #00ff00; } 100% { background: var(--mythic); } }

        /* Collection Grid */
        .book-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 5px; }
        .slot { width: 45px; height: 45px; background: #222; border-radius: 5px; display: flex; align-items: center; justify-content: center; font-size: 1.2rem; cursor: help; border: 1px solid #333; }
        .locked { filter: grayscale(1) brightness(0.3); }

        /* Buttons */
        .roll-btn { 
            width: 280px; padding: 20px; font-size: 1.5rem; background: linear-gradient(180deg, #3498db, #2980b9); 
            border: none; border-radius: 15px; color: white; cursor: pointer; font-weight: bold;
            box-shadow: 0 5px 0 #1a4f73; margin-top: 20px; text-transform: uppercase;
        }
        .roll-btn:hover { filter: brightness(1.1); }
        .roll-btn:active { transform: translateY(3px); box-shadow: 0 2px 0 #1a4f73; }
    </style>
</head>
<body>

<div class="sidebar-left">
    <h2 style="color:var(--rare)">ğŸ“– COLLECTION</h2>
    <div id="collection-grid" class="book-grid"></div>
</div>

<div class="main-game">
    <div id="rarity-label" style="font-weight:bold; letter-spacing:5px;">PREPARE TO ROLL</div>
    <div class="stage" id="stage">
        <div class="aura"></div>
        <div id="art-display">ğŸ¥š</div>
    </div>
    <h1 id="name-display" style="margin:10px 0;">???</h1>
    <button class="roll-btn" onclick="roll()">ROLL ğŸ¾</button>
</div>

<div class="sidebar-right">
    <h2 style="color:var(--legendary)">ğŸ›’ SHOP</h2>
    <div id="shop-items"></div>
    <div id="stats" style="margin-top:20px; padding:15px; background:#000; border-radius:10px; font-size:0.9rem;"></div>
</div>

<script>
    const database = {
        Common: [
            {id:"c1", n:"Garden Snail", a:"ğŸŒ"}, {id:"c2", n:"Street Cat", a:"ğŸˆ"}, {id:"c3", n:"City Pigeon", a:"ğŸ¦"},
            {id:"c4", n:"Brown Mouse", a:"ğŸ­"}, {id:"c5", n:"Worker Ant", a:"ğŸœ"}, {id:"c6", n:"Green Beetle", a:"ğŸª²"},
            {id:"c7", n:"Goldfish", a:"ğŸŸ"}, {id:"c8", n:"Mosquito", a:"ğŸ¦Ÿ"}
        ],
        Uncommon: [
            {id:"u1", n:"Wild Fox", a:"ğŸ¦Š"}, {id:"u2", n:"Wise Owl", a:"ğŸ¦‰"}, {id:"u3", n:"Forest Deer", a:"ğŸ¦Œ"},
            {id:"u4", n:"Raccoon", a:"ğŸ¦"}, {id:"u5", n:"Fruit Bat", a:"ğŸ¦‡"}, {id:"u6", n:"Tree Frog", a:"ğŸ¸"},
            {id:"u7", n:"Hedgehog", a:"ğŸ¦”"}, {id:"u8", n:"Red Panda", a:"ğŸ¼"}
        ],
        Rare: [
            {id:"r1", n:"Great Shark", a:"ğŸ¦ˆ"}, {id:"r2", n:"Mountain Lion", a:"ğŸ¦"}, {id:"r3", n:"Golden Eagle", a:"ğŸ¦…"},
            {id:"r4", n:"Polar Bear", a:"ğŸ»â€â„ï¸"}, {id:"r5", n:"Giant Squid", a:"ğŸ¦‘"}, {id:"r6", n:"King Cobra", a:"ğŸ"},
            {id:"r7", n:"Black Rhino", a:"ğŸ¦"}, {id:"r8", n:"Electric Eel", a:"ğŸâš¡"}
        ],
        Legendary: [
            {id:"l1", n:"Fire Phoenix", a:"ğŸ”¥ğŸ¦"}, {id:"l2", n:"Storm Dragon", a:"ğŸ²âš¡"}, {id:"l3", n:"Holy Unicorn", a:"ğŸ¦„âœ¨"},
            {id:"l4", n:"Hellhound", a:"ğŸ•ğŸ”¥"}, {id:"l5", n:"Jade Turtle", a:"ğŸ¢ğŸ‰"}, {id:"l6", n:"Frost Mammoth", a:"ğŸ¦£â„ï¸"}
        ],
        Mythic: [
            {id:"m1", n:"CHRONOS WHALE", a:"ğŸ‹â³"}, {id:"m2", n:"VOID REAPER", a:"ğŸ’€ğŸŒ€"}, {id:"m3", n:"GALAXY SPIRIT", a:"ğŸŒŒğŸ¦Š"},
            {id:"m4", n:"SYSTEM ERROR", a:"ğŸ‘¾âš ï¸"}, {id:"m5", n:"SUN EATER", a:"â˜„ï¸ğŸ¦"}
        ]
    };

    let s = { rolls: 0, luck: 1.0, inv: {Common:0, Uncommon:0, Rare:0, Legendary:0, Mythic:0}, unlocked: [] };

    function roll() {
        s.rolls++;
        let rng = Math.random() * 1000000;
        let t = "Common";
        if (rng < (1.5 * s.luck)) t = "Mythic";
        else if (rng < (400 * s.luck)) t = "Legendary";
        else if (rng < (10000 * s.luck)) t = "Rare";
        else if (rng < (200000 * s.luck)) t = "Uncommon";

        const pool = database[t];
        const pick = pool[Math.floor(Math.random() * pool.length)];
        
        s.inv[t]++;
        if(!s.unlocked.includes(pick.id)) s.unlocked.push(pick.id);

        // Visual Update
        document.getElementById('stage').className = "stage " + t;
        document.getElementById('art-display').innerText = pick.a;
        document.getElementById('name-display').innerText = pick.n;
        document.getElementById('name-display').className = t;
        document.getElementById('rarity-label').innerText = t + " DISCOVERED";

        updateUI();
        save();
    }

    function updateUI() {
        // Update Book
        const grid = document.getElementById('collection-grid');
        grid.innerHTML = "";
        Object.values(database).flat().forEach(animal => {
            const found = s.unlocked.includes(animal.id);
            grid.innerHTML += `<div class="slot ${found ? '' : 'locked'}">${found ? animal.a : '?'}</div>`;
        });

        // Update Stats
        document.getElementById('stats').innerHTML = `
            <b>Rolls:</b> ${s.rolls} | <b>Luck:</b> ${s.luck.toFixed(1)}x<br><hr>
            C: ${s.inv.Common} | U: ${s.inv.Uncommon} | R: ${s.inv.Rare} | L: ${s.inv.Legendary} | M: ${s.inv.Mythic}
        `;
    }

    function save() { localStorage.setItem('bioRoll_v8', JSON.stringify(s)); }
    function load() {
        const saved = localStorage.getItem('bioRoll_v8');
        if(saved) { s = JSON.parse(saved); updateUI(); } else { updateUI(); }
    }

    load();
</script>
</body>
</html>
