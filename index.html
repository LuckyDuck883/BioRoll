<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio-Roll: Shiny & Shop</title>
    <style>
        :root { --common: #ecf0f1; --uncommon: #2ecc71; --rare: #3498db; --legendary: #f1c40f; --mythic: #9b59b6; --shiny: #ff69b4; }
        body { background: #0f0f0f; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; text-align: center; padding: 10px; margin: 0; }
        .container { max-width: 500px; margin: auto; background: #1a1a1a; padding: 20px; border-radius: 25px; border: 2px solid #333; }
        
        /* Animal Display */
        #art-display { font-size: 7rem; margin: 10px 0; min-height: 120px; transition: 0.3s; }
        #name-display { font-size: 2rem; font-weight: 800; }
        #rarity-label { font-size: 0.8rem; text-transform: uppercase; letter-spacing: 4px; color: #666; }

        /* Shiny Effect */
        .is-shiny { animation: shiny-sparkle 1s infinite alternate; filter: drop-shadow(0 0 15px var(--shiny)); }
        @keyframes shiny-sparkle { from { filter: hue-rotate(0deg) drop-shadow(0 0 10px var(--shiny)); } to { filter: hue-rotate(360deg) drop-shadow(0 0 25px white); } }

        /* UI Elements */
        .stats-bar { display: flex; justify-content: space-around; background: #222; padding: 10px; border-radius: 15px; margin-bottom: 10px; border: 1px solid #444; }
        button { width: 100%; padding: 15px; font-size: 1.2rem; cursor: pointer; background: #3498db; color: white; border: none; border-radius: 12px; font-weight: bold; margin: 5px 0; }
        
        /* Shop & Tabs */
        .shop-container { background: #151515; padding: 15px; border-radius: 15px; margin-top: 15px; text-align: left; border: 1px solid #ffcc00; }
        .shop-item { display: flex; justify-content: space-between; align-items: center; padding: 8px 0; border-bottom: 1px solid #333; font-size: 0.9rem; }
        .btn-buy { width: auto; padding: 5px 10px; font-size: 0.8rem; background: #f1c40f; color: #000; box-shadow: none; }

        /* Rarity Classes */
        .Common { color: var(--common); } .Uncommon { color: var(--uncommon); }
        .Rare { color: var(--rare); } .Legendary { color: var(--legendary); } .Mythic { color: var(--mythic); }
    </style>
</head>
<body>

<div class="container">
    <div class="stats-bar">
        <div>ğŸ° <span id="count">0</span></div>
        <div>ğŸ€ <span id="luck-stat">1.0</span>x</div>
        <div>âœ¨ <span id="shiny-count">0</span></div>
    </div>

    <div id="rarity-label">Roll to find a Shiny</div>
    <div id="art-display">ğŸ¥š</div>
    <div id="name-display">???</div>
    
    <button onclick="roll()">ROLL ğŸ¾</button>

    <div class="shop-container">
        <h3 style="margin-top:0; color:#f1c40f;">ğŸª™ Mega Shop</h3>
        <div class="shop-item">
            <span><b>4-Leaf Clover</b> (+0.5 Luck)</span>
            <button class="btn-buy" onclick="buy('luck', 50)">Cost: 50 Commons</button>
        </div>
        <div class="shop-item">
            <span><b>Shiny Charm</b> (Better Shiny Odds)</span>
            <button class="btn-buy" onclick="buy('shinyRate', 10)">Cost: 10 Uncommons</button>
        </div>
        <div class="shop-item">
            <span><b>Golden Feed</b> (+2.0 Luck)</span>
            <button class="btn-buy" onclick="buy('megaLuck', 5)">Cost: 5 Rares</button>
        </div>
        <p id="inv-stats" style="font-size: 0.7rem; color: #777; margin-top: 10px;">Inventory: C:0 U:0 R:0 L:0 M:0</p>
    </div>
</div>

<script>
    const database = {
        Common: [{n: "Cat", a: "ğŸˆ"}, {n: "Rat", a: "ğŸ€"}, {n: "Dog", a: "ğŸ•"}, {n: "Snail", a: "ğŸŒ"}, {n: "Ant", a: "ğŸœ"}],
        Uncommon: [{n: "Fox", a: "ğŸ¦Š"}, {n: "Owl", a: "ğŸ¦‰"}, {n: "Bat", a: "ğŸ¦‡"}, {n: "Snake", a: "ğŸ"}],
        Rare: [{n: "Lion", a: "ğŸ¦"}, {n: "Shark", a: "ğŸ¦ˆ"}, {n: "Wolf", a: "ğŸº"}, {n: "Tiger", a: "ğŸ¯"}],
        Legendary: [{n: "Phoenix", a: "ğŸ¦…ğŸ”¥"}, {n: "Dragon", a: "ğŸ‰"}, {n: "Unicorn", a: "ğŸ¦„"}],
        Mythic: [{n: "GLITCH", a: "ğŸ‘¾"}, {n: "COSMIC WHALE", a: "ğŸ‹ğŸŒ "}]
    };

    let s = { 
        rolls: 0, luck: 1.0, shinies: 0, shinyMod: 100, 
        inv: { Common: 0, Uncommon: 0, Rare: 0, Legendary: 0, Mythic: 0 } 
    };

    function load() {
        const saved = localStorage.getItem('bioRoll_v4');
        if (saved) { s = JSON.parse(saved); updateUI(); }
    }

    function save() { localStorage.setItem('bioRoll_v4', JSON.stringify(s)); }

    function updateUI() {
        document.getElementById('count').innerText = s.rolls;
        document.getElementById('luck-stat').innerText = s.luck.toFixed(1);
        document.getElementById('shiny-count').innerText = s.shinies;
        document.getElementById('inv-stats').innerText = `Inventory: C:${s.inv.Common} U:${s.inv.Uncommon} R:${s.inv.Rare} L:${s.inv.Legendary} M:${s.inv.Mythic}`;
    }

    function roll() {
        s.rolls++;
        let rng = Math.random() * 1000000;
        let t = "Common";
        if (rng < (1 * s.luck)) t = "Mythic";
        else if (rng < (150 * s.luck)) t = "Legendary";
        else if (rng < (4000 * s.luck)) t = "Rare";
        else if (rng < (100000 * s.luck)) t = "Uncommon";

        s.inv[t]++;
        const pick = database[t][Math.floor(Math.random() * database[t].length)];
        
        // Shiny Roll (Default 1 in 100)
        let isShiny = (Math.random() * s.shinyMod) < 1;
        
        const art = document.getElementById('art-display');
        const name = document.getElementById('name-display');
        const rLabel = document.getElementById('rarity-label');
        
        art.innerText = pick.a;
        name.innerText = (isShiny ? "âœ¨ SHINY " : "") + pick.n;
        art.className = isShiny ? "is-shiny" : "";
        name.className = t;
        rLabel.innerText = isShiny ? "ğŸ’– SHINY FOUND! ğŸ’–" : t;

        if (isShiny) s.shinies++;
        
        updateUI(); save();
    }

    function buy(type, cost) {
        if (type === 'luck' && s.inv.Common >= cost) {
            s.inv.Common -= cost; s.luck += 0.5;
        } else if (type === 'shinyRate' && s.inv.Uncommon >= cost) {
            s.inv.Uncommon -= cost; s.shinyMod *= 0.8; // Increases shiny frequency
        } else if (type === 'megaLuck' && s.inv.Rare >= cost) {
            s.inv.Rare -= cost; s.luck += 2.0;
        } else {
            alert("Not enough animals!");
            return;
        }
        updateUI(); save();
        alert("Upgrade Purchased!");
    }

    load();
</script>
</body>
</html>
