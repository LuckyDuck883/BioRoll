<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio-Roll: Extreme</title>
    <style>
        :root { --common: #ecf0f1; --uncommon: #2ecc71; --rare: #3498db; --legendary: #f1c40f; --mythic: #9b59b6; --shiny: #ff69b4; }
        body { background: #0a0a0a; color: #e0e0e0; font-family: 'Segoe UI', sans-serif; text-align: center; overflow-x: hidden; margin: 0; }
        .container { max-width: 500px; margin: 20px auto; background: #1a1a1a; padding: 25px; border-radius: 30px; border: 3px solid #333; position: relative; }
        
        /* Animal Display & Effects */
        #art-display { font-size: 8rem; margin: 15px 0; min-height: 150px; display: flex; align-items: center; justify-content: center; transition: transform 0.1s; }
        #name-display { font-size: 2.2rem; font-weight: 900; text-transform: uppercase; }
        
        /* Screen Shake Animation */
        .shake { animation: shake 0.3s; }
        @keyframes shake { 0% { transform: translate(1px, 1px) rotate(0deg); } 20% { transform: translate(-3px, 0px) rotate(-1deg); } 50% { transform: translate(3px, 2px) rotate(1deg); } 100% { transform: translate(0,0); } }

        /* Floating Text Effect */
        .floating-text { position: absolute; animation: floatUp 1s forwards; font-weight: bold; pointer-events: none; }
        @keyframes floatUp { from { opacity: 1; transform: translateY(0); } to { opacity: 0; transform: translateY(-100px); } }

        /* UI Styling */
        .stats-bar { display: flex; justify-content: space-around; background: #222; padding: 15px; border-radius: 20px; margin-bottom: 15px; border: 1px solid #444; }
        button { width: 100%; padding: 18px; font-size: 1.3rem; cursor: pointer; background: #3498db; color: white; border: none; border-radius: 15px; font-weight: bold; box-shadow: 0 6px 0 #21618c; margin-bottom: 10px; }
        button:active { transform: translateY(3px); box-shadow: 0 3px 0 #21618c; }
        button:disabled { background: #555; box-shadow: none; cursor: not-allowed; }

        .shop-container { background: #111; padding: 15px; border-radius: 20px; margin-top: 20px; text-align: left; border: 1px solid #444; }
        .shop-item { display: flex; justify-content: space-between; align-items: center; padding: 10px 0; border-bottom: 1px solid #222; }
        
        /* Rarity Classes */
        .Common { color: var(--common); }
        .Uncommon { color: var(--uncommon); }
        .Rare { color: var(--rare); filter: drop-shadow(0 0 5px var(--rare)); }
        .Legendary { color: var(--legendary); filter: drop-shadow(0 0 15px var(--legendary)); animation: pulse 1s infinite; }
        .Mythic { color: var(--mythic); filter: drop-shadow(0 0 25px var(--mythic)); animation: glitch 0.2s infinite; }
        .is-shiny { filter: drop-shadow(0 0 20px var(--shiny)) !important; }

        @keyframes pulse { 0% { transform: scale(1); } 50% { transform: scale(1.1); } 100% { transform: scale(1); } }
        @keyframes glitch { 0% { transform: skew(2deg); } 50% { transform: skew(-2deg); } 100% { transform: skew(0); } }
    </style>
</head>
<body>

<div class="container" id="main-card">
    <div class="stats-bar">
        <div>üé∞ <span id="count">0</span></div>
        <div>üçÄ <span id="luck-stat">1.0</span>x</div>
        <div>‚ú® <span id="shiny-count">0</span></div>
    </div>

    <div id="art-display">ü•ö</div>
    <div id="name-display">ROLL ME</div>
    
    <button id="roll-btn" onclick="roll()">ROLL üêæ</button>

    <div class="shop-container">
        <h3 style="margin: 0 0 10px 0; color: #f1c40f;">üè™ The Upgrade Shop</h3>
        <div class="shop-item">
            <span><b>Auto-Roll Bot</b> (1s/roll)</span>
            <button style="width:auto; padding:5px 10px; font-size:0.8rem;" id="auto-buy" onclick="buyAuto()">Cost: 5 Uncommons</button>
        </div>
        <div class="shop-item">
            <span><b>Shiny Magnet</b> (2x Shiny Chance)</span>
            <button style="width:auto; padding:5px 10px; font-size:0.8rem;" onclick="buy('shiny', 20)">Cost: 20 Uncommons</button>
        </div>
        <p id="inv-stats" style="font-size: 0.7rem; color: #666; margin-top: 10px;">C:0 U:0 R:0 L:0 M:0</p>
    </div>
</div>

<script>
    const database = {
        Common: [{n: "Slime", a: "üíß"}, {n: "Pigeon", a: "üê¶"}, {n: "Rat", a: "üêÄ"}, {n: "Cat", a: "üêà"}, {n: "Ant", a: "üêú"}],
        Uncommon: [{n: "Fox", a: "ü¶ä"}, {n: "Owl", a: "ü¶â"}, {n: "Snake", a: "üêç"}, {n: "Deer", a: "ü¶å"}],
        Rare: [{n: "Lion", a: "ü¶Å"}, {n: "Shark", a: "ü¶à"}, {n: "Tiger", a: "üêØ"}, {n: "Mammoth", a: "ü¶£"}],
        Legendary: [{n: "Phoenix", a: "üî•"}, {n: "Dragon", a: "üê≤"}, {n: "Unicorn", a: "ü¶Ñ"}, {n: "Hydra", a: "üêçüêç"}],
        Mythic: [{n: "Cthulhu", a: "üêô"}, {n: "Godzilla", a: "ü¶ñ"}, {n: "Galaxy Whale", a: "üêãüå†"}]
    };

    let s = { 
        rolls: 0, luck: 1.0, shinies: 0, shinyMod: 100, hasAuto: false,
        inv: { Common: 0, Uncommon: 0, Rare: 0, Legendary: 0, Mythic: 0 } 
    };

    let autoInterval = null;

    function load() {
        const saved = localStorage.getItem('bioRoll_v5');
        if (saved) { s = JSON.parse(saved); updateUI(); if(s.hasAuto) startAuto(); }
    }

    function save() { localStorage.setItem('bioRoll_v5', JSON.stringify(s)); }

    function updateUI() {
        document.getElementById('count').innerText = s.rolls;
        document.getElementById('luck-stat').innerText = s.luck.toFixed(1);
        document.getElementById('shiny-count').innerText = s.shinies;
        document.getElementById('inv-stats').innerText = `C:${s.inv.Common} U:${s.inv.Uncommon} R:${s.inv.Rare} L:${s.inv.Legendary} M:${s.inv.Mythic}`;
        if(s.hasAuto) document.getElementById('auto-buy').innerText = "OWNED";
    }

    function spawnFloaty(text, color) {
        const el = document.createElement('div');
        el.innerText = text;
        el.className = 'floating-text';
        el.style.color = color;
        el.style.left = Math.random() * 80 + 10 + "%";
        el.style.top = "50%";
        document.getElementById('main-card').appendChild(el);
        setTimeout(() => el.remove(), 1000);
    }

    function roll() {
        s.rolls++;
        let rng = Math.random() * 1000000;
        let t = "Common";
        if (rng < (1 * s.luck)) t = "Mythic";
        else if (rng < (200 * s.luck)) t = "Legendary";
        else if (rng < (5000 * s.luck)) t = "Rare";
        else if (rng < (120000 * s.luck)) t = "Uncommon";

        s.inv[t]++;
        const pick = database[t][Math.floor(Math.random() * database[t].length)];
        let isShiny = (Math.random() * s.shinyMod) < 1;

        const art = document.getElementById('art-display');
        const name = document.getElementById('name-display');
        const card = document.getElementById('main-card');

        // Effects for Rares+
        if (t !== "Common") {
            card.classList.remove('shake');
            void card.offsetWidth; // Trigger reflow
            card.classList.add('shake');
            spawnFloaty("+1 " + t, "var(--" + t.toLowerCase() + ")");
        }

        art.innerText = pick.a;
        name.innerText = (isShiny ? "‚ú® " : "") + pick.n;
        art.className = (isShiny ? "is-shiny " : "") + t;
        name.className = t;

        if (isShiny) {
            s.shinies++;
            spawnFloaty("SHINY!", "#ff69b4");
        }
        
        updateUI(); save();
    }

    function buyAuto() {
        if (!s.hasAuto && s.inv.Uncommon >= 5) {
            s.inv.Uncommon -= 5;
            s.hasAuto = true;
            startAuto();
            updateUI(); save();
        }
    }

    function startAuto() {
        if (autoInterval) clearInterval(autoInterval);
        autoInterval = setInterval(roll, 1000);
    }

    function buy(type, cost) {
        if (type === 'shiny' && s.inv.Uncommon >= cost) {
            s.inv.Uncommon -= cost; s.shinyMod /= 2;
            updateUI(); save();
            alert("Shinies are now 2x more common!");
        }
    }

    load();
</script>
</body>
</html>
