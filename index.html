<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio-Roll: Infinite Rarity</title>
    <style>
        :root { 
            --common: #95a5a6; --uncommon: #2ecc71; --rare: #3498db; 
            --legendary: #f1c40f; --mythic: #9b59b6; --eldritch: #e67e22;
            --godly: #ff3e3e; --ascended: #00ffff; --shiny: #ff69b4;
            --panel: rgba(10, 10, 10, 0.98);
        }
        
        body { background: #000; color: #fff; font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        #particle-canvas { position: absolute; inset: 0; pointer-events: none; z-index: 1; }
        #flash { position: fixed; inset: 0; background: #fff; opacity: 0; pointer-events: none; z-index: 2000; }

        /* Layout */
        .sidebar, .shop-panel { width: 280px; background: var(--panel); border: 1px solid #222; padding: 20px; display: flex; flex-direction: column; z-index: 100; overflow-y: auto; }
        .main-game { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; z-index: 50; }

        /* Stage */
        #display-stage { position: relative; width: 350px; height: 350px; display: flex; align-items: center; justify-content: center; pointer-events: none; }
        .skin-layer { position: absolute; font-size: 10rem; z-index: 5; }
        .aura-layer { position: absolute; font-size: 16rem; opacity: 0.2; filter: blur(50px); animation: pulse 2s infinite alternate; }
        @keyframes pulse { from { transform: scale(0.8); opacity: 0.1; } to { transform: scale(1.2); opacity: 0.3; } }

        /* UI Components */
        .btn { width: 100%; padding: 18px; border: none; border-radius: 15px; cursor: pointer; font-weight: 900; transition: 0.2s; position: relative; z-index: 200; text-transform: uppercase; }
        .btn:hover { transform: scale(1.03); filter: brightness(1.2); }
        .btn:active { transform: scale(0.95); }
        .gamble-btn { background: linear-gradient(45deg, #fff, #ddd); color: #000; font-size: 1.5rem; box-shadow: 0 0 20px rgba(255,255,255,0.2); }
        
        .shop-btn { background: #27ae60; color: #fff; font-size: 0.75rem; margin-top: 5px; padding: 10px; }
        .shop-btn:disabled { background: #333; opacity: 0.5; cursor: not-allowed; }

        .stat-card { background: rgba(255,255,255,0.03); border: 1px solid #333; border-radius: 12px; padding: 12px; margin-bottom: 10px; }
        .tag { font-size: 0.6rem; letter-spacing: 2px; color: #555; text-transform: uppercase; margin-bottom: 3px; display: block; }
        
        /* Leveling */
        .xp-bar { width: 100%; height: 6px; background: #222; border-radius: 3px; margin-top: 8px; overflow: hidden; }
        #xp-fill { width: 0%; height: 100%; background: var(--ascended); transition: 0.3s; }

        .shake { animation: shake 0.3s; }
        @keyframes shake { 0% { transform: translate(1px, 1px); } 20% { transform: translate(-3px, 0px); } 40% { transform: translate(3px, 2px); } 100% { transform: translate(0,0); } }
    </style>
</head>
<body id="body">

<div id="flash"></div>
<canvas id="particle-canvas"></canvas>

<div class="sidebar">
    <span class="tag">Evolution Status</span>
    <div class="stat-card">
        LVL <span id="lvl">1</span>
        <div class="xp-bar"><div id="xp-fill"></div></div>
    </div>
    <div class="stat-card">LUCK: <b id="luck-stat" style="color:var(--uncommon)">1.0x</b></div>
    <span class="tag">Biological Vault</span>
    <div id="inv-list" style="font-size: 0.75rem; line-height: 1.5;"></div>
</div>

<div class="main-game">
    <div id="display-stage">
        <div id="aura-layer" class="aura-layer"></div>
        <div id="skin-layer" class="skin-layer">ðŸ¥š</div>
    </div>
    <div id="rarity-tag" style="font-weight: 900; letter-spacing: 5px; margin-top: 10px;">STANDBY</div>
    <div id="animal-name" style="font-size: 3rem; font-weight: 900; margin-bottom: 20px;">READY?</div>
    
    <div style="width: 320px;">
        <button class="btn gamble-btn" onclick="roll()">Gamble Time</button>
        <div style="display:flex; justify-content:center; gap:20px; margin-top:15px;">
            <label style="font-size: 0.7rem; color: #555; cursor:pointer;"><input type="checkbox" id="turbo"> TURBO</label>
        </div>
    </div>
</div>

<div class="shop-panel">
    <span class="tag">Empire Marketplace</span>
    <div class="stat-card">
        <b style="color:var(--uncommon)">Luck Essence</b>
        <p style="font-size: 0.6rem; color: #777;">+0.5 Luck permanently.</p>
        <button class="btn shop-btn" onclick="buy('luck', 100, 'Common')">100 Common</button>
    </div>
    <div class="stat-card">
        <b style="color:var(--rare)">Super Bulk (x100)</b>
        <p style="font-size: 0.6rem; color: #777;">Instant 100 rolls.</p>
        <button class="btn shop-btn" onclick="buy('bulk', 5, 'Rare')">5 Rare</button>
    </div>
    <div class="stat-card">
        <b style="color:var(--legendary)">Golden Splicer</b>
        <p style="font-size: 0.6rem; color: #777;">Double Shiny chance.</p>
        <button class="btn shop-btn" onclick="buy('shiny', 2, 'Legendary')">2 Legendary</button>
    </div>
    <div class="stat-card">
        <b style="color:var(--mythic)">Biome Catalyst</b>
        <p style="font-size: 0.6rem; color: #777;">+5 Levels instantly.</p>
        <button class="btn shop-btn" onclick="buy('level', 1, 'Mythic')">1 Mythic</button>
    </div>
</div>

<script>
    const database = {
        Common: { c: "#95a5a6", p: [{n:"Ant",e:"ðŸœ",a:"ðŸ‚"},{n:"Fly",e:"ðŸª°",a:"ðŸ—‘ï¸"},{n:"Rat",e:"ðŸ€",a:"ðŸ§€"},{n:"Snail",e:"ðŸŒ",a:"ðŸŒ±"},{n:"Worm",e:"ðŸª±",a:"ðŸ•³ï¸"}]},
        Uncommon: { c: "#2ecc71", p: [{n:"Fox",e:"ðŸ¦Š",a:"ðŸŒ²"},{n:"Frog",e:"ðŸ¸",a:"ðŸ’§"},{n:"Owl",e:"ðŸ¦‰",a:"ðŸŒ™"},{n:"Bat",e:"ðŸ¦‡",a:"ðŸŒ‘"}]},
        Rare: { c: "#3498db", p: [{n:"Shark",e:"ðŸ¦ˆ",a:"ðŸŒŠ"},{n:"Lion",e:"ðŸ¦",a:"ðŸŒ…"},{n:"Doge",e:"ðŸ•",a:"ðŸ¦´"},{n:"Cobra",e:"ðŸ",a:"ðŸœï¸"}]},
        Legendary: { c: "#f1c40f", p: [{n:"Dragon",e:"ðŸ²",a:"âš¡"},{n:"Phoenix",e:"ðŸ¦â€ðŸ”¥",a:"ðŸ”¥"},{n:"Unicorn",e:"ðŸ¦„",a:"âœ¨"}]},
        Mythic: { c: "#9b59b6", p: [{n:"Glitch",e:"ðŸ‘¾",a:"â¬›"},{n:"Reaper",e:"ðŸ’€",a:"ðŸŒ€"}]},
        Eldritch: { c: "#e67e22", p: [{n:"Cthulhu",e:"ðŸ™",a:"ðŸ‘ï¸"},{n:"Void Eye",e:"ðŸ§¿",a:"ðŸ”®"}]},
        Godly: { c: "#ff3e3e", p: [{n:"Supernova",e:"â˜€ï¸",a:"ðŸ’¥"},{n:"Eternity",e:"ðŸ’Ž",a:"âœ¨"}]},
        Ascended: { c: "#00ffff", p: [{n:"THE ALL",e:"ðŸ‘ï¸â€ðŸ—¨ï¸",a:"ðŸŒŒ"}]}
    };

    let s = { rolls: 0, exp: 0, lvl: 1, luck: 1.0, shinyMult: 1, inv: {Common:0, Uncommon:0, Rare:0, Legendary:0, Mythic:0, Eldritch:0, Godly:0, Ascended:0} };

    function roll() {
        s.rolls++; s.exp += 15;
        if(s.exp >= 100) { s.lvl++; s.exp = 0; }
        
        let rng = Math.random() * 1000000;
        let t = "Common";
        if (rng < (1 * s.luck)) t = "Ascended";
        else if (rng < (10 * s.luck)) t = "Godly";
        else if (rng < (100 * s.luck)) t = "Eldritch";
        else if (rng < (1000 * s.luck)) t = "Mythic";
        else if (rng < (15000 * s.luck)) t = "Legendary";
        else if (rng < (100000 * s.luck)) t = "Rare";
        else if (rng < (300000 * s.luck)) t = "Uncommon";

        s.inv[t]++;
        const pick = database[t].p[Math.floor(Math.random() * database[t].p.length)];
        const isShiny = (Math.random() * 100) < (2 * s.shinyMult);

        updateDisplay(t, pick, isShiny);
        updateUI();
    }

    function updateDisplay(t, p, shiny) {
        const color = database[t].c;
        document.getElementById('rarity-tag').innerText = t;
        document.getElementById('rarity-tag').style.color = color;
        document.getElementById('animal-name').innerText = (shiny ? "âœ¨ " : "") + p.n;
        document.getElementById('animal-name').style.color = color;
        document.getElementById('skin-layer').innerText = p.e;
        document.getElementById('aura-layer').innerText = p.a;
        document.getElementById('body').classList.add('shake');
        setTimeout(() => document.getElementById('body').classList.remove('shake'), 300);

        if(["Godly", "Ascended"].includes(t)) {
            document.getElementById('flash').style.opacity = "1";
            setTimeout(() => document.getElementById('flash').style.opacity = "0", 200);
        }
    }

    function buy(item, cost, curr) {
        if(s.inv[curr] >= cost) {
            s.inv[curr] -= cost;
            if(item === 'luck') s.luck += 0.5;
            if(item === 'bulk') for(let i=0; i<100; i++) roll();
            if(item === 'shiny') s.shinyMult += 1;
            if(item === 'level') s.lvl += 5;
            updateUI();
        }
    }

    function updateUI() {
        document.getElementById('lvl').innerText = s.lvl;
        document.getElementById('xp-fill').style.width = s.exp + "%";
        document.getElementById('luck-stat').innerText = s.luck.toFixed(1) + "x";
        let invHtml = "";
        for(let key in s.inv) {
            invHtml += `<div style="display:flex; justify-content:space-between">
                <span style="color:var(--${key.toLowerCase()})">${key}</span>
                <span>${s.inv[key]}</span>
            </div>`;
        }
        document.getElementById('inv-list').innerHTML = invHtml;
    }

    let tInt;
    document.getElementById('turbo').onchange = (e) => {
        if(e.target.checked) tInt = setInterval(roll, 100);
        else clearInterval(tInt);
    };
</script>
</body>
</html>
