<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DABESTGAME - CLEAN EDITION</title>
    <style>
        :root { 
            --bg: #010101; --text: #0f0; --gold: #ffd700;
            --ducky: #fff700; --zenith: #00ff88;
        }
        
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        .panel { width: 340px; background: #000; border: 1px solid #1a1a1a; padding: 20px; display: flex; flex-direction: column; z-index: 100; box-shadow: 10px 0 20px rgba(0,0,0,0.5); }
        .main { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; background: radial-gradient(circle at center, #0a0a0a 0%, #010101 100%); }

        /* The Stage */
        .stage-box { width: 340px; height: 340px; border: 1px solid #222; display: flex; align-items: center; justify-content: center; font-size: 10rem; position: relative; border-radius: 60px; transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        .aura { position: absolute; inset: -30px; border-radius: 50%; opacity: 0.2; filter: blur(50px); z-index: -1; transition: 1s; }

        /* Gallery Grid */
        .gallery { flex-grow: 1; overflow-y: auto; display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-top: 15px; border-top: 1px solid #222; padding-top: 15px; }
        .gallery-item { aspect-ratio: 1; background: #080808; display: flex; align-items: center; justify-content: center; font-size: 1.4rem; border-radius: 12px; filter: grayscale(1); opacity: 0.15; border: 1px solid transparent; }
        .unlocked { filter: grayscale(0); opacity: 1; border-color: #333; background: #111; box-shadow: 0 4px 10px rgba(0,0,0,0.3); }

        /* Interface */
        .btn { width: 100%; padding: 16px; border: none; cursor: pointer; font-weight: 800; background: #fff; color: #000; border-radius: 12px; font-size: 1.1rem; transition: 0.2s; margin-top: 10px; }
        .btn:active { transform: scale(0.96); }
        .stat-card { background: #080808; border: 1px solid #1a1a1a; padding: 12px; border-radius: 12px; margin-bottom: 12px; }
        
        .xp-bar { width: 100%; height: 6px; background: #111; border-radius: 3px; margin-top: 8px; overflow: hidden; }
        .xp-fill { height: 100%; background: var(--zenith); width: 0%; transition: 0.3s; }

        #log { font-size: 0.7rem; color: #444; height: 100px; overflow-y: auto; margin-top: auto; }
    </style>
</head>
<body>

<div class="panel">
    <h1 style="color:var(--gold); margin:0; font-size: 1.6rem; letter-spacing: -1px;">WHALE_ID</h1>
    
    <div class="stat-card" style="margin-top:20px;">
        <div style="display:flex; justify-content:space-between; font-size:0.8rem; color:#888;">
            <span>LEVEL <b id="lvl" style="color:#fff;">1</b></span>
            <span>LUCK <b id="luck" style="color:var(--gold);">1.0x</b></span>
        </div>
        <div class="xp-bar"><div id="xp-fill" class="xp-fill"></div></div>
    </div>
    
    <button class="btn" onclick="roll()">ROLL ENTITY</button>
    <label style="font-size: 0.8rem; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 15px; color:#666;">
        <input type="checkbox" id="turbo" style="accent-color: var(--zenith);"> HYPER_SPLICER
    </label>

    <div id="log"></div>
    
    <div style="display:flex; gap:5px;">
        <button class="btn" style="background:#111; color:#555; font-size:0.7rem; padding:8px;" onclick="saveGame()">SAVE</button>
        <button class="btn" style="background:#111; color:#555; font-size:0.7rem; padding:8px;" onclick="resetGame()">RESET</button>
    </div>
</div>

<div class="main">
    <div class="stage-box" id="s">
        <div id="aura" class="aura"></div>
        <span id="skin">ðŸ“¦</span>
    </div>
    <div id="rtag" style="font-weight:900; color:#333; margin-top: 25px; letter-spacing: 6px; font-size: 0.8rem;">DNA_SCANNING</div>
    <div id="display-name" style="font-size: 2.4rem; font-weight: 900; margin-top: 8px;">---</div>
    <div id="ab-text" style="color:var(--gold); font-size:0.9rem; margin-top:10px; font-style: italic;"></div>
</div>

<div class="panel">
    <h2 style="font-size: 1rem; margin:0; color:#444;">DISCOVERY_LOG</h2>
    <div class="gallery" id="gallery"></div>
    <div style="margin-top:20px; font-size:0.7rem; color:#333; line-height:1.4;">
        * LUCKY DUCKS (+0.5 LUCK)<br>
        * ZENITH CORES (+1.0 LUCK)<br>
        * GLITCH (TURBO SPEED MAX)
    </div>
</div>

<script>
    const database = [
        { r: "Common", s: "ðŸ€", c: "#95a5a6", n: "Alley Rat" },
        { r: "Common", s: "ðŸœ", c: "#95a5a6", n: "Nano Ant" },
        { r: "Rare", s: "ðŸº", c: "#3498db", n: "Frost Wolf" },
        { r: "Rare", s: "ðŸ", c: "#3498db", n: "Cyber Cobra" },
        { r: "Epic", s: "ðŸ¦…", c: "#9b59b6", n: "Storm Hawk" },
        { r: "Legendary", s: "ðŸ²", c: "#f1c40f", n: "Jade Dragon" },
        { r: "Lucky Duck", s: "ðŸ¦†", c: "#fff700", n: "QUACK_LORD" },
        { r: "Zenith", s: "â™¾ï¸", c: "#00ff88", n: "ZENITH_CORE" },
        { r: "Glitch", s: "ðŸ‘¾", c: "#ff00ff", n: "SYS_ERR_99" },
        { r: "Omni", s: "ðŸ‘ï¸", c: "#ffffff", n: "THE_WATCHER" }
    ];

    let state = { lvl: 1, xp: 0, luck: 1, unlocked: [], speed: 100 };

    function init() {
        const saved = localStorage.getItem('whale_save_data');
        if (saved) state = JSON.parse(saved);
        buildGallery();
        updateUI();
        log("SESSION_RESTORED...");
    }

    function buildGallery() {
        const gal = document.getElementById('gallery');
        gal.innerHTML = '';
        database.forEach((item, idx) => {
            let div = document.createElement('div');
            div.className = 'gallery-item' + (state.unlocked.includes(idx) ? ' unlocked' : '');
            div.innerText = item.s;
            gal.appendChild(div);
        });
    }

    function log(msg) {
        const l = document.getElementById('log');
        l.innerHTML = `> ${msg}<br>` + l.innerHTML;
        l.scrollTop = 0;
    }

    function roll() {
        state.xp += 15;
        if(state.xp >= 100) { state.lvl++; state.xp = 0; }
        
        let rng = (Math.random() * 1200) / state.luck;
        let idx = 0;

        if (rng < 0.1) idx = 9;
        else if (rng < 0.8) idx = 8;
        else if (rng < 4) idx = 7;
        else if (rng < 12) idx = 6;
        else if (rng < 40) idx = 5;
        else if (rng < 150) idx = 2;
        else idx = Math.floor(Math.random() * 2);

        const entity = database[idx];
        document.getElementById('skin').innerText = entity.s;
        document.getElementById('rtag').innerText = entity.r.toUpperCase();
        document.getElementById('rtag').style.color = entity.c;
        document.getElementById('display-name').innerText = entity.n;
        document.getElementById('aura').style.background = `radial-gradient(circle, ${entity.c} 0%, transparent 70%)`;
        
        if(!state.unlocked.includes(idx)) {
            state.unlocked.push(idx);
            log(`NEW_GENOME: ${entity.n}`);
            applyAbilities();
            buildGallery();
        }

        updateUI();
        saveGame();
    }

    function applyAbilities() {
        state.luck = 1.0;
        state.speed = 100;
        if(state.unlocked.includes(6)) state.luck += (state.unlocked.filter(i => i === 6).length * 0.5); // Stack Ducks
        if(state.unlocked.includes(7)) state.luck += 1.0;
        if(state.unlocked.includes(8)) state.speed = 40;
    }

    function saveGame() { localStorage.setItem('whale_save_data', JSON.stringify(state)); }
    function resetGame() { if(confirm("DELETE ALL DATA?")) { localStorage.clear(); location.reload(); } }

    function updateUI() {
        document.getElementById('lvl').innerText = state.lvl;
        document.getElementById('luck').innerText = state.luck.toFixed(1) + "x";
        document.getElementById('xp-fill').style.width = state.xp + "%";
    }

    let tInt;
    document.getElementById('turbo').onchange = (e) => {
        if(e.target.checked) tInt = setInterval(roll, state.speed);
        else clearInterval(tInt);
    };

    init();
</script>
</body>
</html>
