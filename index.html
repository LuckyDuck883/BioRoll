<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bio-Roll: Empire</title>
    <style>
        :root { 
            --common: #ecf0f1; --uncommon: #2ecc71; --rare: #3498db; 
            --legendary: #f1c40f; --mythic: #9b59b6; --shiny: #ff69b4; 
            --bg: #050505; --panel: #111;
        }
        body { background: var(--bg); color: #e0e0e0; font-family: 'Segoe UI', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        .sidebar-left { width: 280px; background: var(--panel); border-right: 2px solid #222; padding: 15px; overflow-y: auto; }
        .main-game { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; }
        .sidebar-right { width: 320px; background: var(--panel); border-left: 2px solid #222; padding: 15px; overflow-y: auto; }

        /* Game Elements */
        .stage { position: relative; width: 280px; height: 280px; display: flex; align-items: center; justify-content: center; border-radius: 50%; }
        #art-display { font-size: 9rem; z-index: 2; }
        .aura { position: absolute; width: 100%; height: 100%; border-radius: 50%; filter: blur(45px); opacity: 0.4; }

        /* Shop Styling */
        .shop-section { margin-bottom: 25px; }
        .shop-card { 
            background: #1a1a1a; border-radius: 12px; padding: 12px; margin-bottom: 10px; 
            border-left: 4px solid #444; transition: 0.2s;
        }
        .shop-card:hover { background: #222; }
        .shop-card.unlocked { border-left-color: var(--legendary); }
        .price-tag { font-size: 0.75rem; color: #888; margin: 5px 0; }
        
        .buy-btn { 
            width: 100%; padding: 8px; border-radius: 6px; border: none; font-weight: bold; cursor: pointer;
            background: #27ae60; color: white;
        }
        .buy-btn:disabled { background: #333; cursor: not-allowed; }

        /* Mega Roll Button */
        .mega-btn { 
            background: linear-gradient(45deg, #e67e22, #f1c40f); 
            width: 200px; padding: 12px; border-radius: 10px; border: none; color: white;
            font-weight: bold; cursor: pointer; margin-top: 10px; display: none;
        }

        /* Collection Grid */
        .book-grid { display: grid; grid-template-columns: repeat(5, 1fr); gap: 4px; }
        .slot { width: 40px; height: 40px; background: #222; border-radius: 4px; display: flex; align-items: center; justify-content: center; font-size: 1rem; }
        .locked { opacity: 0.1; }

        /* Text Colors */
        .Common { color: var(--common); } .Uncommon { color: var(--uncommon); }
        .Rare { color: var(--rare); } .Legendary { color: var(--legendary); } .Mythic { color: var(--mythic); }
    </style>
</head>
<body>

<div class="sidebar-left">
    <h3 style="color:var(--rare)">ğŸ“– COLLECTION</h3>
    <div id="collection-grid" class="book-grid"></div>
    <hr style="border:1px solid #222; margin:20px 0;">
    <div id="stats-area"></div>
</div>

<div class="main-game">
    <div id="rarity-label" style="font-weight:bold; letter-spacing:4px; font-size: 0.8rem;">STANDING BY...</div>
    <div class="stage" id="stage"><div class="aura"></div><div id="art-display">ğŸ¥š</div></div>
    <h1 id="name-display">ROLL START</h1>
    <button class="buy-btn" style="width:250px; font-size:1.5rem; padding:15px;" onclick="roll(1)">ROLL</button>
    <button id="mega-roll-ui" class="mega-btn" onclick="roll(10)">MEGA ROLL (x10)</button>
</div>

<div class="sidebar-right">
    <h2 style="color:var(--legendary); margin-top:0;">ğŸ¬ UPGRADE CENTER</h2>
    
    <div class="shop-section">
        <h4 style="color:#888;">CONSUMABLES</h4>
        <div class="shop-card">
            <b>ğŸ€ Luck Potion</b>
            <div class="price-tag">Cost: 25 Common</div>
            <button class="buy-btn" onclick="buy('luck', 25, 'Common')">Buy +0.5 Luck</button>
        </div>
    </div>

    <div class="shop-section">
        <h4 style="color:#888;">AUTOMATION</h4>
        <div class="shop-card" id="auto-card">
            <b>ğŸ¤– Auto-Roll Bot</b>
            <div class="price-tag">Cost: 15 Uncommon</div>
            <button class="buy-btn" id="auto-btn" onclick="buyAuto()">Activate Bot</button>
        </div>
        <div class="shop-card">
            <b>âš¡ Turbo Gears</b>
            <div class="price-tag">Cost: 5 Rare</div>
            <button class="buy-btn" onclick="buySpeed()">Double Speed</button>
        </div>
    </div>

    <div class="shop-section">
        <h4 style="color:#888;">SPECIAL TECH</h4>
        <div class="shop-card">
            <b>ğŸ“¦ Mega-Roll Module</b>
            <div class="price-tag">Cost: 1 Legendary</div>
            <button class="buy-btn" id="mega-btn-shop" onclick="buyMega()">Unlock x10 Roll</button>
        </div>
    </div>
</div>

<script>
    const database = {
        Common: [{id:"c1", n:"Cat", a:"ğŸˆ"}, {id:"c2", n:"Rat", a:"ğŸ€"}, {id:"c3", n:"Ant", a:"ğŸœ"}, {id:"c4", n:"Snail", a:"ğŸŒ"}],
        Uncommon: [{id:"u1", n:"Fox", a:"ğŸ¦Š"}, {id:"u2", n:"Owl", a:"ğŸ¦‰"}, {id:"u3", n:"Deer", a:"ğŸ¦Œ"}],
        Rare: [{id:"r1", n:"Shark", a:"ğŸ¦ˆ"}, {id:"r2", n:"Lion", a:"ğŸ¦"}, {id:"r3", n:"Tiger", a:"ğŸ¯"}],
        Legendary: [{id:"l1", n:"Dragon", a:"ğŸ²"}, {id:"l2", n:"Phoenix", a:"ğŸ”¥"}, {id:"l3", n:"Unicorn", a:"ğŸ¦„"}],
        Mythic: [{id:"m1", n:"GALAXY", a:"ğŸŒŒ"}, {id:"m2", n:"VOID", a:"ğŸŒ€"}, {id:"m3", n:"GLITCH", a:"ğŸ‘¾"}]
    };

    let s = { 
        rolls: 0, luck: 1.0, auto: false, speed: 1000, mega: false,
        inv: {Common:0, Uncommon:0, Rare:0, Legendary:0, Mythic:0}, unlocked: [] 
    };

    let autoInterval = null;

    function roll(times) {
        for(let i=0; i<times; i++) {
            s.rolls++;
            let rng = Math.random() * 1000000;
            let t = "Common";
            if (rng < (2 * s.luck)) t = "Mythic";
            else if (rng < (450 * s.luck)) t = "Legendary";
            else if (rng < (12000 * s.luck)) t = "Rare";
            else if (rng < (250000 * s.luck)) t = "Uncommon";

            s.inv[t]++;
            const pick = database[t][Math.floor(Math.random() * database[t].length)];
            if(!s.unlocked.includes(pick.id)) s.unlocked.push(pick.id);

            if (i === times - 1) { // Only update visual for the last roll
                updateStage(t, pick);
            }
        }
        updateUI(); save();
    }

    function updateStage(t, pick) {
        document.getElementById('stage').style.boxShadow = `inset 0 0 50px var(--${t.toLowerCase()})`;
        document.getElementById('art-display').innerText = pick.a;
        document.getElementById('name-display').innerText = pick.n;
        document.getElementById('name-display').className = t;
        document.getElementById('rarity-label').innerText = t;
    }

    function updateUI() {
        // Stats
        document.getElementById('stats-area').innerHTML = `
            <b>Rolls:</b> ${s.rolls}<br>
            <b>Luck:</b> ${s.luck.toFixed(1)}x<br><br>
            <span class="Common">C: ${s.inv.Common}</span> | <span class="Uncommon">U: ${s.inv.Uncommon}</span><br>
            <span class="Rare">R: ${s.inv.Rare}</span> | <span class="Legendary">L: ${s.inv.Legendary}</span><br>
            <span class="Mythic">M: ${s.inv.Mythic}</span>
        `;

        // Collection
        const grid = document.getElementById('collection-grid');
        grid.innerHTML = "";
        Object.values(database).flat().forEach(animal => {
            const found = s.unlocked.includes(animal.id);
            grid.innerHTML += `<div class="slot ${found ? '' : 'locked'}">${found ? animal.a : '?'}</div>`;
        });

        // Shop Buttons
        if(s.auto) document.getElementById('auto-btn').innerText = "Active";
        if(s.mega) {
            document.getElementById('mega-btn-shop').innerText = "Unlocked";
            document.getElementById('mega-roll-ui').style.display = "block";
        }
    }

    function buy(type, cost, curr) {
        if(s.inv[curr] >= cost) {
            s.inv[curr] -= cost;
            if(type === 'luck') s.luck += 0.5;
            updateUI(); save();
        }
    }

    function buyAuto() {
        if(!s.auto && s.inv.Uncommon >= 15) {
            s.inv.Uncommon -= 15; s.auto = true;
            startAuto(); updateUI(); save();
        }
    }

    function buySpeed() {
        if(s.auto && s.inv.Rare >= 5) {
            s.inv.Rare -= 5; s.speed = 500;
            startAuto(); updateUI(); save();
        }
    }

    function buyMega() {
        if(!s.mega && s.inv.Legendary >= 1) {
            s.inv.Legendary -= 1; s.mega = true;
            updateUI(); save();
        }
    }

    function startAuto() {
        if(autoInterval) clearInterval(autoInterval);
        autoInterval = setInterval(() => roll(1), s.speed);
    }

    function save() { localStorage.setItem('bioRoll_v9', JSON.stringify(s)); }
    function load() {
        const saved = localStorage.getItem('bioRoll_v9');
        if(saved) { 
            s = JSON.parse(saved); 
            updateUI(); 
            if(s.auto) startAuto();
        } else { updateUI(); }
    }

    load();
</script>
</body>
</html>
