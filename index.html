<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DABESTGAME - STATS EDITION</title>
    <style>
        :root { 
            --bg: #010101; --text: #0f0; --gold: #ffd700;
            --ducky: #fff700; --zenith: #00ff88;
        }
        
        body { background: var(--bg); color: #fff; font-family: 'Inter', sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; }
        
        /* Layout */
        .panel { width: 340px; background: #000; border: 1px solid #1a1a1a; padding: 20px; display: flex; flex-direction: column; z-index: 100; }
        .main { flex-grow: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }

        /* The Stage */
        .stage-box { width: 320px; height: 320px; border: 1px solid #222; display: flex; align-items: center; justify-content: center; font-size: 9rem; position: relative; border-radius: 60px; }
        .aura { position: absolute; inset: -20px; border-radius: 50%; opacity: 0.2; filter: blur(50px); z-index: -1; }

        /* Gallery Grid */
        .gallery { flex-grow: 1; overflow-y: auto; display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; margin-top: 15px; border-top: 1px solid #222; padding-top: 15px; }
        .gallery-item { background: #080808; padding: 10px; border-radius: 12px; filter: grayscale(1); opacity: 0.2; border: 1px solid transparent; display: flex; flex-direction: column; align-items: center; }
        .unlocked { filter: grayscale(0); opacity: 1; border-color: #333; background: #111; }
        .count-badge { font-size: 0.7rem; color: var(--gold); margin-top: 5px; font-weight: bold; }

        /* Interface */
        .btn { width: 100%; padding: 16px; border: none; cursor: pointer; font-weight: 800; background: #fff; color: #000; border-radius: 12px; font-size: 1.1rem; margin-top: 10px; }
        .stat-card { background: #080808; border: 1px solid #1a1a1a; padding: 12px; border-radius: 12px; margin-bottom: 12px; font-size: 0.8rem; }
        
        #log { font-size: 0.7rem; color: #444; height: 80px; overflow-y: auto; margin-top: auto; }
    </style>
</head>
<body>

<div class="panel">
    <h1 style="color:var(--gold); margin:0; font-size: 1.5rem;">WHALE_STATS</h1>
    
    <div class="stat-card" style="margin-top:20px;">
        <div style="display:flex; justify-content:space-between;"><span>TOTAL ROLLS:</span> <b id="total-rolls">0</b></div>
        <div style="display:flex; justify-content:space-between; margin-top:5px;"><span>LUCK MOD:</span> <b id="luck" style="color:var(--gold);">1.0x</b></div>
    </div>
    
    <button class="btn" onclick="roll()">ROLL ENTITY</button>
    <label style="font-size: 0.8rem; display: flex; align-items: center; justify-content: center; gap: 10px; margin-top: 15px; color:#666;">
        <input type="checkbox" id="turbo"> HYPER_SPLICER
    </label>

    <div id="log"></div>
    <button class="btn" style="background:#111; color:#555; font-size:0.7rem; padding:8px;" onclick="resetGame()">WIPE DATA</button>
</div>

<div class="main">
    <div class="stage-box" id="s">
        <div id="aura" class="aura"></div>
        <span id="skin">ðŸ“¦</span>
    </div>
    <div id="rtag" style="font-weight:900; color:#333; margin-top: 25px; letter-spacing: 6px; font-size: 0.7rem;">ANALYZING_GENOME</div>
    <div id="display-name" style="font-size: 2.2rem; font-weight: 900; margin-top: 8px;">---</div>
</div>

<div class="panel">
    <h2 style="font-size: 1rem; margin:0; color:#444;">RARITY_TRACKER</h2>
    <div class="gallery" id="gallery"></div>
</div>

<script>
    const database = [
        { r: "Common", s: "ðŸ€", c: "#95a5a6", n: "Alley Rat" },
        { r: "Common", s: "ðŸœ", c: "#95a5a6", n: "Nano Ant" },
        { r: "Rare", s: "ðŸº", c: "#3498db", n: "Frost Wolf" },
        { r: "Epic", s: "ðŸ¦…", c: "#9b59b6", n: "Storm Hawk" },
        { r: "Legendary", s: "ðŸ²", c: "#f1c40f", n: "Jade Dragon" },
        { r: "Lucky Duck", s: "ðŸ¦†", c: "#fff700", n: "QUACK_LORD" },
        { r: "Zenith", s: "â™¾ï¸", c: "#00ff88", n: "ZENITH_CORE" },
        { r: "Glitch", s: "ðŸ‘¾", c: "#ff00ff", n: "SYS_ERR_99" },
        { r: "Omni", s: "ðŸ‘ï¸", c: "#ffffff", n: "THE_WATCHER" }
    ];

    let state = { rolls: 0, luck: 1, counts: {}, unlocked: [], speed: 100 };
    database.forEach((_, i) => state.counts[i] = 0);

    function init() {
        const saved = localStorage.getItem('whale_stats_save');
        if (saved) state = JSON.parse(saved);
        buildGallery();
        updateUI();
    }

    function buildGallery() {
        const gal = document.getElementById('gallery');
        gal.innerHTML = '';
        database.forEach((item, idx) => {
            let div = document.createElement('div');
            div.className = 'gallery-item' + (state.unlocked.includes(idx) ? ' unlocked' : '');
            div.innerHTML = `<span>${item.s}</span><span class="count-badge">x${state.counts[idx] || 0}</span>`;
            gal.appendChild(div);
        });
    }

    function log(msg) {
        const l = document.getElementById('log');
        l.innerHTML = `> ${msg}<br>` + l.innerHTML;
    }

    function roll() {
        state.rolls++;
        let rng = (Math.random() * 1500) / state.luck;
        let idx = 0;

        if (rng < 0.1) idx = 8;
        else if (rng < 1) idx = 7;
        else if (rng < 5) idx = 6;
        else if (rng < 15) idx = 5;
        else if (rng < 60) idx = 4;
        else if (rng < 200) idx = 3;
        else if (rng < 500) idx = 2;
        else idx = Math.floor(Math.random() * 2);

        state.counts[idx]++;
        const entity = database[idx];
        
        document.getElementById('skin').innerText = entity.s;
        document.getElementById('rtag').innerText = entity.r.toUpperCase();
        document.getElementById('rtag').style.color = entity.c;
        document.getElementById('display-name').innerText = entity.n;
        document.getElementById('aura').style.background = `radial-gradient(circle, ${entity.c} 0%, transparent 70%)`;
        
        if(!state.unlocked.includes(idx)) {
            state.unlocked.push(idx);
            log(`NEW_TYPE: ${entity.n}`);
        }

        applyBuffs();
        buildGallery();
        updateUI();
        saveGame();
    }

    function applyBuffs() {
        state.luck = 1.0 + (state.counts[5] * 0.5) + (state.counts[6] * 1.5);
        state.speed = state.unlocked.includes(7) ? 40 : 100;
    }

    function saveGame() { localStorage.setItem('whale_stats_save', JSON.stringify(state)); }
    function resetGame() { if(confirm("WIPE STATS?")) { localStorage.clear(); location.reload(); } }

    function updateUI() {
        document.getElementById('total-rolls').innerText = state.rolls;
        document.getElementById('luck').innerText = state.luck.toFixed(1) + "x";
    }

    let tInt;
    document.getElementById('turbo').onchange = (e) => {
        if(e.target.checked) tInt = setInterval(roll, state.speed);
        else clearInterval(tInt);
    };

    init();
</script>
</body>
</html>
